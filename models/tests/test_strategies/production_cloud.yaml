# Production Cloud Strategy
# Enterprise-grade configuration with failover and monitoring

strategies:
  production_cloud:
    name: Production Model Configuration
    description: Enterprise production setup with multiple providers and automatic failover
    
    components:
      cloud_api:
        type: openai_compatible
        config:
          provider: openai
          api_key: ${OPENAI_API_KEY}
          default_model: gpt-4-turbo-preview
          max_tokens: 4096
          temperature: 0.7
          timeout: 60
          rate_limit:
            requests_per_minute: 500
            tokens_per_minute: 90000
      
      # Backup cloud provider
      backup_api:
        type: openai_compatible
        config:
          provider: anthropic
          api_key: ${ANTHROPIC_API_KEY}
          default_model: claude-3-opus-20240229
          max_tokens: 4096
          temperature: 0.7
          timeout: 60
    
    # Multi-tier fallback chain
    fallback_chain:
      - provider: cloud_api
        model: gpt-4-turbo-preview
        conditions:
          - api_healthy
          - within_rate_limit
        priority: 1
      - provider: cloud_api
        model: gpt-3.5-turbo
        conditions:
          - api_healthy
        priority: 2
        cost_per_1k_tokens: 0.002
      - provider: backup_api
        model: claude-3-opus-20240229
        conditions:
          - api_healthy
        priority: 3
    
    # Intelligent routing based on query type
    routing_rules:
      - pattern: "analyze|complex|detailed"
        provider: cloud_api
        model: gpt-4-turbo-preview
      - pattern: "summarize|simple|quick"
        provider: cloud_api
        model: gpt-3.5-turbo
      - pattern: "creative|write|story"
        provider: backup_api
        model: claude-3-opus-20240229
    
    # Production constraints
    constraints:
      max_daily_cost_usd: 100
      max_tokens_per_request: 4096
      max_requests_per_minute: 500
      require_ssl: true
    
    # Retry configuration
    retry_strategy:
      max_retries: 3
      backoff_multiplier: 2
      retry_on_errors:
        - rate_limit_exceeded
        - temporary_unavailable
        - timeout
    
    # Comprehensive monitoring
    monitoring:
      track_usage: true
      track_costs: true
      track_latency: true
      alert_thresholds:
        daily_cost_usd: 100
        error_rate_percent: 5
        p95_latency_ms: 5000
      metrics_endpoint: ${METRICS_ENDPOINT}
      log_level: WARNING