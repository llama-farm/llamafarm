$schema: http://json-schema.org/draft-07/schema#
$id: https://github.com/llama-farm/llamafarm/rag/schema.yaml
title: RAG Strategy Configuration Schema
description: Schema for RAG system strategy configurations
type: object
additionalProperties: false
properties:
  strategies:
    type: array
    title: Strategy Definitions
    description: Array of strategy configurations
    minItems: 1
    items:
      $ref: "#/definitions/strategyDefinition"
  strategy_templates:
    type: object
    title: Predefined Strategy Templates
    description: Ready-to-use strategy configurations
    default: {}
    additionalProperties:
      $ref: "#/definitions/strategyDefinition"
  component_metadata:
    type: object
    title: Component Metadata
    description: Metadata about available components
    properties:
      parsers:
        type: object
        additionalProperties:
          type: object
          properties:
            description:
              type: string
            class_name:
              type: string
            module:
              type: string
            use_cases:
              type: array
              items:
                type: string
            dependencies:
              type: object
              properties:
                required:
                  type: array
                  items:
                    type: string
                optional:
                  type: array
                  items:
                    type: string
      extractors:
        type: object
        additionalProperties:
          type: object
      embedders:
        type: object
        additionalProperties:
          type: object
      vector_stores:
        type: object
        additionalProperties:
          type: object
      retrieval_strategies:
        type: object
        additionalProperties:
          type: object
  compatibility_rules:
    type: object
    title: Component Compatibility Rules
    description: Rules for component compatibility
    properties:
      component_compatibility:
        type: object
      embedder_store_compatibility:
        type: object
      strategy_store_optimization:
        type: object
  validation_rules:
    type: object
    title: Validation Rules
    description: System-wide validation rules
    properties:
      required_fields:
        type: object
      field_constraints:
        type: object
      performance_warnings:
        type: array
        items:
          type: object
  best_practices:
    type: object
    title: Best Practices
    description: Recommended configuration patterns
    additionalProperties:
      type: array
      items:
        type: string
required:
  - strategies
definitions:
  strategyDefinition:
    type: object
    title: Strategy Definition
    description: Defines a complete RAG strategy configuration
    required:
      - name
      - description
      - components
    additionalProperties: false
    properties:
      name:
        type: string
        pattern: ^[a-z][a-z0-9_]*$
        minLength: 1
        maxLength: 50
        description: Unique strategy identifier
        examples:
          - simple
          - customer_support
          - legal_documents
      description:
        type: string
        minLength: 10
        maxLength: 500
        description: Clear description of strategy purpose
      tags:
        type: array
        uniqueItems: true
        items:
          type: string
          pattern: ^[a-z0-9_-]+$
        description: Tags for categorization
        examples:
          - - production
            - optimized
          - - development
            - testing
      use_cases:
        type: array
        minItems: 1
        uniqueItems: true
        items:
          type: string
          minLength: 3
        description: Specific use cases
      components:
        $ref: "#/definitions/strategyComponents"
  strategyComponents:
    type: object
    title: Strategy Components
    required:
      - parser
      - embedder
      - vector_store
      - retrieval_strategy
    additionalProperties: false
    properties:
      parser:
        $ref: "#/definitions/parserConfig"
      extractors:
        type: array
        maxItems: 10
        items:
          $ref: "#/definitions/extractorConfig"
      embedder:
        $ref: "#/definitions/embedderConfig"
      vector_store:
        $ref: "#/definitions/vectorStoreConfig"
      retrieval_strategy:
        $ref: "#/definitions/retrievalStrategyConfig"
  parserConfig:
    title: Parser Configuration
    description: Parser configuration
    required: [type, config]
    additionalProperties: false
    properties:
      type:
        type: string
        enum:
          - CSVParser
          - PDFParser
          - MarkdownParser
          - HTMLParser
          - DocxParser
          - ExcelParser
          - PlainTextParser
      config:
        type: object
        oneOf:
          - $ref: "#/definitions/parsers/csvParserConfig"
          - $ref: "#/definitions/parsers/pdfParserConfig"
          - $ref: "#/definitions/parsers/markdownParserConfig"
          - $ref: "#/definitions/parsers/htmlParserConfig"
          - $ref: "#/definitions/parsers/docxParserConfig"
          - $ref: "#/definitions/parsers/excelParserConfig"
          - $ref: "#/definitions/parsers/plainTextParserConfig"
  parsers:
    csvParserConfig:
      type: object
      title: CSV Parser Configuration
      additionalProperties: false
      properties:
        content_fields:
          type: array
          items:
            type: string
          default:
            - subject
            - body
          description: Fields to use as document content
        metadata_fields:
          type: array
          items:
            type: string
          default: []
          description: Fields to store as metadata
        id_field:
          type: string
          default: id
          description: Field to use as document ID
        combine_content:
          type: boolean
          default: false
          description: Whether to combine multiple content fields
        content_separator:
          type: string
          default: " "
          description: Separator for combined content
        encoding:
          type: string
          default: utf-8
          description: CSV file encoding
        delimiter:
          type: string
          default: ","
          maxLength: 1
          description: CSV delimiter character
    pdfParserConfig:
      type: object
      title: PDF Parser Configuration
      additionalProperties: false
      properties:
        extract_metadata:
          type: boolean
          default: true
          description: Extract PDF metadata
        extract_page_structure:
          type: boolean
          default: true
          description: Extract page-level structure
        combine_pages:
          type: boolean
          default: true
          description: Combine all pages into single document
        page_separator:
          type: string
          default: "


            --- Page Break ---


            "
          description: Separator between pages
        min_text_length:
          type: integer
          default: 10
          minimum: 0
          description: Minimum text length to include page
        include_page_numbers:
          type: boolean
          default: true
          description: Include page numbers in text
        extract_outline:
          type: boolean
          default: true
          description: Extract document outline
        extract_images:
          type: boolean
          default: false
          description: Extract embedded images
        ocr_enabled:
          type: boolean
          default: false
          description: Enable OCR for scanned documents
    markdownParserConfig:
      type: object
      title: Markdown Parser Configuration
      additionalProperties: false
      properties:
        extract_metadata:
          type: boolean
          default: true
          description: Extract YAML frontmatter
        extract_headings:
          type: boolean
          default: true
          description: Extract heading structure
        extract_links:
          type: boolean
          default: true
          description: Extract all links
        extract_code_blocks:
          type: boolean
          default: true
          description: Extract code blocks
        chunk_by_headings:
          type: boolean
          default: false
          description: Split by headings
        preserve_formatting:
          type: boolean
          default: false
          description: Preserve Markdown formatting
        heading_level_split:
          type: integer
          default: 2
          minimum: 1
          maximum: 6
          description: Heading level for splitting
    htmlParserConfig:
      type: object
      title: HTML Parser Configuration
      additionalProperties: false
      properties:
        extract_metadata:
          type: boolean
          default: true
          description: Extract meta tags
        extract_links:
          type: boolean
          default: true
          description: Extract hyperlinks
        extract_images:
          type: boolean
          default: true
          description: Extract image sources
        preserve_structure:
          type: boolean
          default: false
          description: Preserve HTML structure
        remove_scripts:
          type: boolean
          default: true
          description: Remove JavaScript
        remove_styles:
          type: boolean
          default: true
          description: Remove CSS
        text_only:
          type: boolean
          default: false
          description: Extract only text
    docxParserConfig:
      type: object
      title: DOCX Parser Configuration
      additionalProperties: false
      properties:
        extract_metadata:
          type: boolean
          default: true
          description: Extract document properties
        extract_headers_footers:
          type: boolean
          default: true
          description: Include headers and footers
        extract_comments:
          type: boolean
          default: true
          description: Extract comments
        extract_tables:
          type: boolean
          default: true
          description: Extract tables
        extract_images:
          type: boolean
          default: false
          description: Extract images
        preserve_formatting:
          type: boolean
          default: false
          description: Preserve text formatting
    excelParserConfig:
      type: object
      title: Excel Parser Configuration
      additionalProperties: false
      properties:
        sheet_names:
          type:
            - array
            - "null"
          items:
            type: string
          default: null
          description: Specific sheets to parse
        combine_sheets:
          type: boolean
          default: false
          description: Combine all sheets
        extract_formulas:
          type: boolean
          default: false
          description: Extract cell formulas
        extract_charts:
          type: boolean
          default: false
          description: Extract chart metadata
        table_format:
          type: string
          enum:
            - csv
            - markdown
            - json
            - text
          default: markdown
          description: Table output format
        header_row:
          type: integer
          default: 0
          minimum: 0
          description: Header row index
    plainTextParserConfig:
      type: object
      title: Plain Text Parser Configuration
      additionalProperties: false
      properties:
        encoding:
          type: string
          default: auto
          description: Text encoding (auto-detect or specify like utf-8, latin1, etc.)
        chunk_size:
          type: [integer, "null"]
          default: null
          minimum: 100
          maximum: 50000
          description: Chunk size in characters (null for no chunking)
        chunk_overlap:
          type: integer
          default: 0
          minimum: 0
          maximum: 5000
          description: Overlap between chunks in characters
        chunk_strategy:
          type: string
          enum:
            - characters
            - sentences
            - paragraphs
          default: characters
          description: Chunking strategy - how to split the text
        respect_sentence_boundaries:
          type: boolean
          default: true
          description: Avoid splitting sentences in the middle when using character chunking
        respect_paragraph_boundaries:
          type: boolean
          default: false
          description: Avoid splitting paragraphs in the middle (overrides sentence boundaries)
        min_chunk_size:
          type: integer
          default: 50
          minimum: 10
          maximum: 1000
          description: Minimum chunk size to avoid creating tiny chunks
        preserve_line_breaks:
          type: boolean
          default: true
          description: Preserve line breaks in the text
        strip_empty_lines:
          type: boolean
          default: true
          description: Remove empty lines while preserving paragraph structure
        detect_structure:
          type: boolean
          default: true
          description: Detect and extract structural elements (headers, lists, code blocks)
    HTMLParser:
      description: Parses HTML documents and web pages
      config_schema:
        extract_metadata:
          type: boolean
          default: true
          description: Extract meta tags
        extract_links:
          type: boolean
          default: true
          description: Extract hyperlinks
        extract_images:
          type: boolean
          default: true
          description: Extract image sources
        preserve_structure:
          type: boolean
          default: false
          description: Preserve HTML structure
        remove_scripts:
          type: boolean
          default: true
          description: Remove JavaScript
        remove_styles:
          type: boolean
          default: true
          description: Remove CSS
        text_only:
          type: boolean
          default: false
          description: Extract only text

        # Chunking configuration
        chunk_size:
          type: [integer, "null"]
          default: null
          minimum: 100
          maximum: 50000
          description: "Chunk size in characters (null for no chunking)"
        chunk_overlap:
          type: integer
          default: 0
          minimum: 0
          maximum: 5000
          description: "Overlap between chunks in characters"
        chunk_strategy:
          type: string
          enum:
            - characters
            - sentences
            - paragraphs
            - elements
          default: elements
          description: "Chunking strategy - elements uses HTML semantic structure"
        respect_sentence_boundaries:
          type: boolean
          default: true
          description: "Avoid splitting sentences in the middle when using character chunking"
        respect_paragraph_boundaries:
          type: boolean
          default: true
          description: "Avoid splitting paragraphs in the middle"
        min_chunk_size:
          type: integer
          default: 100
          minimum: 10
          maximum: 1000
          description: "Minimum chunk size to avoid creating tiny chunks"
      defaults:
        general_purpose:
          name: General Purpose HTML
          description: Standard HTML parsing
          config:
            extract_metadata: true
            extract_links: true
            extract_images: true
            preserve_structure: false
            remove_scripts: true
            remove_styles: true
            text_only: false
          recommended_for:
            - Web pages
            - HTML documents
            - Email templates
        text_extraction:
          name: Text Only Extraction
          description: Extract only text content
          config:
            extract_metadata: false
            extract_links: false
            extract_images: false
            preserve_structure: false
            remove_scripts: true
            remove_styles: true
            text_only: true
          recommended_for:
            - Content extraction
            - Text analysis
            - Simplified parsing
    DocxParser:
      description: Parses Microsoft Word documents
      config_schema:
        extract_metadata:
          type: boolean
          default: true
          description: Extract document properties
        extract_headers_footers:
          type: boolean
          default: true
          description: Include headers and footers
        extract_comments:
          type: boolean
          default: true
          description: Extract comments
        extract_tables:
          type: boolean
          default: true
          description: Extract tables
        extract_images:
          type: boolean
          default: false
          description: Extract images
        preserve_formatting:
          type: boolean
          default: false
          description: Preserve text formatting

        # Chunking configuration
        chunk_size:
          type: [integer, "null"]
          default: null
          minimum: 100
          maximum: 50000
          description: "Chunk size in characters (null for no chunking)"
        chunk_overlap:
          type: integer
          default: 0
          minimum: 0
          maximum: 5000
          description: "Overlap between chunks in characters"
        chunk_strategy:
          type: string
          enum:
            - characters
            - sentences
            - paragraphs
            - sections
          default: paragraphs
          description: "Chunking strategy - sections uses Word's built-in structure"
        respect_sentence_boundaries:
          type: boolean
          default: true
          description: "Avoid splitting sentences in the middle when using character chunking"
        respect_paragraph_boundaries:
          type: boolean
          default: true
          description: "Avoid splitting paragraphs in the middle"
        min_chunk_size:
          type: integer
          default: 100
          minimum: 10
          maximum: 1000
          description: "Minimum chunk size to avoid creating tiny chunks"
      defaults:
        general_purpose:
          name: General Purpose DOCX
          description: Standard Word document parsing
          config:
            extract_metadata: true
            extract_headers_footers: true
            extract_comments: true
            extract_tables: true
            extract_images: false
            preserve_formatting: false
          recommended_for:
            - Reports
            - Letters
            - General documents
        with_comments:
          name: Documents with Comments
          description: Extract documents with review comments
          config:
            extract_metadata: true
            extract_headers_footers: true
            extract_comments: true
            extract_tables: true
            extract_images: false
            preserve_formatting: true
          recommended_for:
            - Reviewed documents
            - Collaborative docs
            - Draft documents
    PlainTextParser:
      description: Parses plain text files
      config_schema:
        encoding:
          type: string
          default: utf-8
          description: Text encoding
        chunk_size:
          type: integer
          default: 1000
          minimum: 100
          maximum: 10000
          description: Chunk size in characters
        chunk_overlap:
          type: integer
          default: 200
          minimum: 0
          maximum: 1000
          description: Overlap between chunks
        split_by:
          type: string
          enum:
            - characters
            - words
            - sentences
            - paragraphs
            - lines
          default: characters
          description: Splitting method
        preserve_whitespace:
          type: boolean
          default: false
          description: Preserve whitespace
      defaults:
        general_purpose:
          name: General Purpose Text
          description: Standard text parsing
          config:
            encoding: utf-8
            chunk_size: 1000
            chunk_overlap: 200
            split_by: characters
            preserve_whitespace: false
          recommended_for:
            - Text files
            - Log files
            - Plain documents
        large_documents:
          name: Large Documents
          description: Large text files with overlap
          config:
            encoding: utf-8
            chunk_size: 2000
            chunk_overlap: 400
            split_by: paragraphs
            preserve_whitespace: false
          recommended_for:
            - Books
            - Large reports
            - Long articles
    MarkdownParser:
      description: Parses Markdown files with structure extraction
      config_schema:
        extract_metadata:
          type: boolean
          default: true
          description: Extract YAML frontmatter
        extract_headings:
          type: boolean
          default: true
          description: Extract heading structure
        extract_links:
          type: boolean
          default: true
          description: Extract all links
        extract_code_blocks:
          type: boolean
          default: true
          description: Extract code blocks
        chunk_by_headings:
          type: boolean
          default: false
          description: Split by headings
        preserve_formatting:
          type: boolean
          default: false
          description: Preserve Markdown formatting
        heading_level_split:
          type: integer
          default: 2
          minimum: 1
          maximum: 6
          description: Heading level for splitting

        # Advanced chunking configuration
        chunk_size:
          type: [integer, "null"]
          default: null
          minimum: 100
          maximum: 50000
          description: "Chunk size in characters (null for no chunking, overrides chunk_by_headings)"
        chunk_overlap:
          type: integer
          default: 0
          minimum: 0
          maximum: 5000
          description: "Overlap between chunks in characters"
        chunk_strategy:
          type: string
          enum:
            - characters
            - sentences
            - paragraphs
            - headings
          default: headings
          description: "Chunking strategy - headings preserves markdown structure"
        respect_sentence_boundaries:
          type: boolean
          default: true
          description: "Avoid splitting sentences in the middle when using character chunking"
        respect_paragraph_boundaries:
          type: boolean
          default: true
          description: "Avoid splitting paragraphs in the middle"
        min_chunk_size:
          type: integer
          default: 100
          minimum: 10
          maximum: 1000
          description: "Minimum chunk size to avoid creating tiny chunks"
      defaults:
        general_purpose:
          name: General Purpose Markdown
          description: Standard Markdown parsing
          config:
            extract_metadata: true
            extract_headings: true
            extract_links: true
            extract_code_blocks: true
            chunk_by_headings: false
            preserve_formatting: false
            heading_level_split: 2
          recommended_for:
            - Documentation
            - README files
            - Blog posts
        technical_docs:
          name: Technical Documentation
          description: Technical docs with code blocks
          config:
            extract_metadata: true
            extract_headings: true
            extract_links: true
            extract_code_blocks: true
            chunk_by_headings: true
            preserve_formatting: true
            heading_level_split: 2
          recommended_for:
            - API documentation
            - Technical guides
            - Developer docs
    CSVParser:
      description: Parser for CSV files with configurable field mapping
      config_schema:
        content_fields:
          type: array
          items:
            type: string
          default:
            - subject
            - body
          description: CSV columns to use as document content
        metadata_fields:
          type: array
          items:
            type: string
          default: []
          description: CSV columns to include as metadata
        id_field:
          type:
            - string
            - "null"
          default: null
          description: CSV column to use as document ID
        combine_content:
          type: boolean
          default: true
          description: Combine multiple content fields into one document
        content_separator:
          type: string
          default: "


            "
          description: Separator when combining content fields
        encoding:
          type: string
          default: utf-8
          description: CSV file encoding
        delimiter:
          type: string
          default: ","
          maxLength: 1
          description: CSV delimiter character
      defaults:
        general_purpose:
          name: General Purpose CSV Parsing
          description: Basic CSV parsing with flexible field configuration
          config:
            content_fields:
              - text
              - content
              - description
            metadata_fields: []
            combine_content: true
            content_separator: "


              "
            encoding: utf-8
            delimiter: ","
          recommended_for:
            - General CSV files
            - Simple tabular data
            - Mixed content
        customer_support:
          name: Customer Support Tickets
          description: Optimized for customer support ticket CSV files
          config:
            content_fields:
              - subject
              - body
              - answer
            metadata_fields:
              - type
              - queue
              - priority
              - language
              - status
            combine_content: true
            content_separator: "


              ---


              "
            id_field: ticket_id
            encoding: utf-8
            delimiter: ","
          recommended_for:
            - Support tickets
            - Help desk data
            - Customer inquiries
        survey_responses:
          name: Survey Response Analysis
          description: Parse survey responses with rating and demographic data
          config:
            content_fields:
              - response_text
              - comments
              - feedback
            metadata_fields:
              - respondent_id
              - survey_date
              - rating
              - age_group
              - location
            combine_content: true
            content_separator: " "
            id_field: response_id
            encoding: utf-8
            delimiter: ","
          recommended_for:
            - Survey data
            - Feedback forms
            - Market research
        product_catalog:
          name: Product Catalog Processing
          description: Parse product information with structured metadata
          config:
            content_fields:
              - name
              - description
              - features
            metadata_fields:
              - category
              - price
              - brand
              - sku
              - availability
            combine_content: true
            content_separator: "

              "
            id_field: sku
            encoding: utf-8
            delimiter: ","
          recommended_for:
            - E-commerce catalogs
            - Product databases
            - Inventory lists
        contact_management:
          name: Contact and CRM Data
          description: Process contact lists and CRM exports
          config:
            content_fields:
              - notes
              - description
              - bio
            metadata_fields:
              - name
              - email
              - phone
              - company
              - role
              - tags
            combine_content: false
            content_separator: "


              "
            id_field: contact_id
            encoding: utf-8
            delimiter: ","
          recommended_for:
            - Contact lists
            - CRM exports
            - Lead databases
    ExcelParser:
      description: Parses Excel spreadsheets
      config_schema:
        sheet_names:
          type:
            - array
            - "null"
          items:
            type: string
          default: null
          description: Specific sheets to parse
        combine_sheets:
          type: boolean
          default: false
          description: Combine all sheets
        extract_formulas:
          type: boolean
          default: false
          description: Extract cell formulas
        extract_charts:
          type: boolean
          default: false
          description: Extract chart metadata
        table_format:
          type: string
          enum:
            - csv
            - markdown
            - json
            - text
          default: markdown
          description: Table output format
        header_row:
          type: integer
          default: 0
          minimum: 0
          description: Header row index
      defaults:
        general_purpose:
          name: General Purpose Excel
          description: Standard Excel parsing
          config:
            sheet_names: null
            combine_sheets: false
            extract_formulas: false
            extract_charts: false
            table_format: markdown
            header_row: 0
          recommended_for:
            - Spreadsheets
            - Data tables
            - Reports
        financial_data:
          name: Financial Data
          description: Financial spreadsheets with formulas
          config:
            sheet_names: null
            combine_sheets: true
            extract_formulas: true
            extract_charts: true
            table_format: markdown
            header_row: 0
          recommended_for:
            - Financial reports
            - Budget sheets
            - Accounting data
    PDFParser:
      description: Extracts text, metadata, and structure from PDF documents
      config_schema:
        extract_metadata:
          type: boolean
          default: true
          description: Extract PDF metadata (title, author, creation date, etc.)
        extract_page_structure:
          type: boolean
          default: true
          description: Extract page-level structure information
        combine_pages:
          type: boolean
          default: true
          description: Combine all pages into single document
        page_separator:
          type: string
          default: "


            --- Page Break ---


            "
          description: Separator between pages when combining
        min_text_length:
          type: integer
          default: 10
          minimum: 0
          description: Minimum text length to include page
        include_page_numbers:
          type: boolean
          default: true
          description: Include page numbers in text
        extract_outline:
          type: boolean
          default: true
          description: Extract document outline/bookmarks
        extract_images:
          type: boolean
          default: false
          description: Extract embedded images
        ocr_enabled:
          type: boolean
          default: false
          description: Enable OCR for scanned documents

        # Chunking configuration
        chunk_size:
          type: [integer, "null"]
          default: null
          minimum: 100
          maximum: 50000
          description: "Chunk size in characters (null for no chunking)"
        chunk_overlap:
          type: integer
          default: 0
          minimum: 0
          maximum: 5000
          description: "Overlap between chunks in characters"
        chunk_strategy:
          type: string
          enum:
            - characters
            - sentences
            - paragraphs
            - pages
          default: characters
          description: "Chunking strategy - pages splits at PDF page boundaries"
        respect_sentence_boundaries:
          type: boolean
          default: true
          description: "Avoid splitting sentences in the middle when using character chunking"
        respect_paragraph_boundaries:
          type: boolean
          default: false
          description: "Avoid splitting paragraphs in the middle (overrides sentence boundaries)"
        min_chunk_size:
          type: integer
          default: 50
          minimum: 10
          maximum: 1000
          description: "Minimum chunk size to avoid creating tiny chunks"
      defaults:
        general_purpose:
          name: General Purpose PDF
          description: Standard PDF parsing with text extraction
          config:
            extract_metadata: true
            extract_page_structure: true
            combine_pages: true
            page_separator: "


              --- Page Break ---


              "
            min_text_length: 10
            include_page_numbers: true
            extract_outline: true
            extract_images: false
            ocr_enabled: false
          recommended_for:
            - General documents
            - Reports
            - Articles
        research_papers:
          name: Research Papers
          description: Academic papers with metadata and structure
          config:
            extract_metadata: true
            extract_page_structure: true
            combine_pages: true
            page_separator: "


              "
            min_text_length: 50
            include_page_numbers: true
            extract_outline: true
            extract_images: false
            ocr_enabled: false
          recommended_for:
            - Academic papers
            - Research documents
            - Scientific publications
        legal_documents:
          name: Legal Documents
          description: Legal documents with page-by-page processing
          config:
            extract_metadata: true
            extract_page_structure: true
            combine_pages: false
            page_separator: "


              [NEW PAGE]


              "
            min_text_length: 20
            include_page_numbers: true
            extract_outline: true
            extract_images: false
            ocr_enabled: false
          recommended_for:
            - Contracts
            - Legal briefs
            - Court documents
        scanned_documents:
          name: Scanned Documents
          description: Scanned PDFs requiring OCR
          config:
            extract_metadata: true
            extract_page_structure: false
            combine_pages: true
            page_separator: "


              --- Page ---


              "
            min_text_length: 5
            include_page_numbers: true
            extract_outline: false
            extract_images: true
            ocr_enabled: true
          recommended_for:
            - Scanned documents
            - Image-based PDFs
            - Historical documents
  extractorConfig:
    type: object
    title: Extractor Configuration
    additionalProperties: false
    required: [type, config]
    properties:
      type:
        type: string
        description: Extractor type identifier
        enum:
          - KeywordExtractor
          - EntityExtractor
          - DateTimeExtractor
          - HeadingExtractor
          - LinkExtractor
          - PathExtractor
          - PatternExtractor
          - StatisticsExtractor
          - SummaryExtractor
          - TableExtractor
      config:
        type: object
        oneOf:
          - $ref: "#/definitions/extractors/keywordExtractorConfig"
          - $ref: "#/definitions/extractors/entityExtractorConfig"
          - $ref: "#/definitions/extractors/dateTimeExtractorConfig"
          - $ref: "#/definitions/extractors/headingExtractorConfig"
          - $ref: "#/definitions/extractors/linkExtractorConfig"
          - $ref: "#/definitions/extractors/pathExtractorConfig"
          - $ref: "#/definitions/extractors/patternExtractorConfig"
          - $ref: "#/definitions/extractors/statisticsExtractorConfig"
          - $ref: "#/definitions/extractors/summaryExtractorConfig"
          - $ref: "#/definitions/extractors/tableExtractorConfig"
  extractors:
    keywordExtractorConfig:
      type: object
      title: Keyword Extractor Configuration
      additionalProperties: false
      properties:
        algorithm:
          type: string
          enum:
            - rake
            - yake
            - tfidf
            - textrank
          default: rake
          description: Extraction algorithm
        max_keywords:
          type: integer
          default: 10
          minimum: 1
          maximum: 100
          description: Maximum keywords
        min_keyword_length:
          type: integer
          default: 3
          minimum: 1
          description: Minimum keyword length
        include_scores:
          type: boolean
          default: true
          description: Include relevance scores
        language:
          type: string
          default: english
          description: Language for stop words
    entityExtractorConfig:
      type: object
      title: Entity Extractor Configuration
      additionalProperties: false
      properties:
        model:
          type: string
          default: en_core_web_sm
          description: NER model name
        entity_types:
          type: array
          items:
            type: string
            enum:
              - PERSON
              - ORG
              - GPE
              - DATE
              - TIME
              - MONEY
              - EMAIL
              - PHONE
              - URL
              - LAW
          default:
            - PERSON
            - ORG
            - GPE
            - DATE
            - TIME
            - MONEY
            - EMAIL
            - PHONE
            - URL
          description: Entity types to extract
        use_fallback:
          type: boolean
          default: true
          description: Use regex fallback
        min_entity_length:
          type: integer
          default: 2
          minimum: 1
          description: Minimum entity length
        merge_entities:
          type: boolean
          default: true
          description: Merge adjacent entities
        confidence_threshold:
          type: number
          default: 0.7
          minimum: 0.0
          maximum: 1.0
          description: Minimum confidence score
    dateTimeExtractorConfig:
      type: object
      title: DateTime Extractor Configuration
      additionalProperties: false
      properties:
        fuzzy_parsing:
          type: boolean
          default: true
          description: Enable fuzzy parsing
        extract_relative:
          type: boolean
          default: true
          description: Extract relative dates
        extract_times:
          type: boolean
          default: true
          description: Extract time expressions
        extract_durations:
          type: boolean
          default: true
          description: Extract durations
        default_timezone:
          type: string
          default: UTC
          description: Default timezone
        date_format:
          type: string
          default: ISO
          description: Output date format
        prefer_dates_from:
          type: string
          enum:
            - past
            - future
            - current
          default: current
          description: Preference for ambiguous dates
    headingExtractorConfig:
      type: object
      title: Heading Extractor Configuration
      additionalProperties: false
      properties:
        max_level:
          type: integer
          default: 6
          minimum: 1
          maximum: 6
          description: Maximum heading level
        include_hierarchy:
          type: boolean
          default: true
          description: Include hierarchy structure
        extract_outline:
          type: boolean
          default: true
          description: Generate document outline
        min_heading_length:
          type: integer
          default: 3
          minimum: 1
          description: Minimum heading length
    linkExtractorConfig:
      type: object
      title: Link Extractor Configuration
      additionalProperties: false
      properties:
        extract_urls:
          type: boolean
          default: true
          description: Extract URLs
        extract_emails:
          type: boolean
          default: true
          description: Extract email addresses
        extract_domains:
          type: boolean
          default: true
          description: Extract unique domains
        validate_urls:
          type: boolean
          default: false
          description: Validate URL format
        resolve_redirects:
          type: boolean
          default: false
          description: Resolve URL redirects
    pathExtractorConfig:
      type: object
      title: Path Extractor Configuration
      additionalProperties: false
      properties:
        extract_file_paths:
          type: boolean
          default: true
          description: Extract file paths
        extract_urls:
          type: boolean
          default: true
          description: Extract URL paths
        extract_s3_paths:
          type: boolean
          default: true
          description: Extract S3 paths
        validate_paths:
          type: boolean
          default: false
          description: Validate path existence
        normalize_paths:
          type: boolean
          default: true
          description: Normalize path formats
    patternExtractorConfig:
      type: object
      title: Pattern Extractor Configuration
      additionalProperties: false
      properties:
        predefined_patterns:
          type: array
          items:
            type: string
            enum:
              - email
              - phone
              - url
              - ip
              - ssn
              - credit_card
              - zip_code
          default: []
          description: Predefined patterns
        custom_patterns:
          type: array
          items:
            type: object
            required:
              - name
              - pattern
            additionalProperties: false
            properties:
              name:
                type: string
                description: Pattern name
              pattern:
                type: string
                description: Regex pattern
              description:
                type: string
                description: Pattern description
          default: []
          description: Custom regex patterns
        case_sensitive:
          type: boolean
          default: false
          description: Case-sensitive matching
        return_positions:
          type: boolean
          default: false
          description: Return match positions
    statisticsExtractorConfig:
      type: object
      title: Statistics Extractor Configuration
      additionalProperties: false
      properties:
        include_readability:
          type: boolean
          default: true
          description: Calculate readability scores
        include_vocabulary:
          type: boolean
          default: true
          description: Analyze vocabulary
        include_structure:
          type: boolean
          default: true
          description: Analyze text structure
        include_sentiment:
          type: boolean
          default: false
          description: Basic sentiment analysis
        include_language:
          type: boolean
          default: true
          description: Detect language
    summaryExtractorConfig:
      type: object
      title: Summary Extractor Configuration
      additionalProperties: false
      properties:
        summary_sentences:
          type: integer
          default: 3
          minimum: 1
          maximum: 10
          description: Number of summary sentences
        algorithm:
          type: string
          enum:
            - textrank
            - lsa
            - luhn
            - lexrank
          default: textrank
          description: Summarization algorithm
        include_key_phrases:
          type: boolean
          default: true
          description: Extract key phrases
        include_statistics:
          type: boolean
          default: true
          description: Include text statistics
    tableExtractorConfig:
      type: object
      title: Table Extractor Configuration
      additionalProperties: false
      properties:
        output_format:
          type: string
          enum:
            - dict
            - list
            - csv
            - markdown
          default: dict
          description: Output format
        extract_headers:
          type: boolean
          default: true
          description: Extract table headers
        merge_cells:
          type: boolean
          default: true
          description: Handle merged cells
        min_rows:
          type: integer
          default: 2
          minimum: 1
          description: Minimum rows for table
    TableExtractor:
      description: Extract tables
      config_schema:
        enabled:
          type: boolean
          default: true
          description: Enable this extractor
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard table extractor
          config:
            enabled: true
          recommended_for:
            - General use
    LinkExtractor:
      description: Extract URLs and links
      config_schema:
        enabled:
          type: boolean
          default: true
          description: Enable this extractor
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard link extractor
          config:
            enabled: true
          recommended_for:
            - General use
    PatternExtractor:
      description: Extract regex patterns
      config_schema:
        enabled:
          type: boolean
          default: true
          description: Enable this extractor
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard pattern extractor
          config:
            enabled: true
          recommended_for:
            - General use
    EntityExtractor:
      description: Extract named entities using NER
      config_schema:
        model:
          type: string
          default: en_core_web_sm
          description: NER model name
        entity_types:
          type: array
          items:
            type: string
            enum:
              - PERSON
              - ORG
              - GPE
              - DATE
              - TIME
              - MONEY
              - EMAIL
              - PHONE
              - URL
              - LAW
          default:
            - PERSON
            - ORG
            - GPE
            - DATE
            - TIME
            - MONEY
            - EMAIL
            - PHONE
            - URL
          description: Entity types to extract
        use_fallback:
          type: boolean
          default: true
          description: Use regex fallback
        min_entity_length:
          type: integer
          default: 2
          minimum: 1
          description: Minimum entity length
        merge_entities:
          type: boolean
          default: true
          description: Merge adjacent entities
        confidence_threshold:
          type: number
          default: 0.7
          minimum: 0.0
          maximum: 1.0
          description: Minimum confidence score
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard entity extraction
          config:
            model: en_core_web_sm
            entity_types:
              - PERSON
              - ORG
              - GPE
              - DATE
              - TIME
              - MONEY
              - EMAIL
              - PHONE
              - URL
            use_fallback: true
            min_entity_length: 2
            merge_entities: true
            confidence_threshold: 0.7
          recommended_for:
            - Documents
            - Articles
            - Reports
    PathExtractor:
      description: Extract file paths
      config_schema:
        enabled:
          type: boolean
          default: true
          description: Enable this extractor
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard path extractor
          config:
            enabled: true
          recommended_for:
            - General use
    DatetimeExtractor:
      description: Extract dates and times
      config_schema:
        enabled:
          type: boolean
          default: true
          description: Enable this extractor
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard datetime extractor
          config:
            enabled: true
          recommended_for:
            - General use
    SummaryExtractor:
      description: Generate summaries
      config_schema:
        enabled:
          type: boolean
          default: true
          description: Enable this extractor
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard summary extractor
          config:
            enabled: true
          recommended_for:
            - General use
    HeadingExtractor:
      description: Extract document headings
      config_schema:
        enabled:
          type: boolean
          default: true
          description: Enable this extractor
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard heading extractor
          config:
            enabled: true
          recommended_for:
            - General use
    StatisticsExtractor:
      description: Extract text statistics
      config_schema:
        enabled:
          type: boolean
          default: true
          description: Enable this extractor
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard statistics extractor
          config:
            enabled: true
          recommended_for:
            - General use
    KeywordExtractor:
      description: Extract keywords from text using various algorithms
      config_schema:
        algorithm:
          type: string
          enum:
            - rake
            - yake
            - tfidf
            - textrank
          default: rake
          description: Extraction algorithm
        max_keywords:
          type: integer
          default: 10
          minimum: 1
          maximum: 100
          description: Maximum keywords
        min_keyword_length:
          type: integer
          default: 3
          minimum: 1
          description: Minimum keyword length
        include_scores:
          type: boolean
          default: true
          description: Include relevance scores
        language:
          type: string
          default: english
          description: Language for stop words
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard keyword extraction
          config:
            algorithm: rake
            max_keywords: 10
            min_keyword_length: 3
            include_scores: true
            language: english
          recommended_for:
            - Documents
            - Articles
            - Reports
  embedderConfig:
    title: Embedder Configuration
    required: [type, config]
    properties:
      type:
        type: string
        enum:
          - OllamaEmbedder
          - OpenAIEmbedder
          - HuggingFaceEmbedder
          - SentenceTransformerEmbedder
      config:
        oneOf:
          - $ref: "#/definitions/embedders/ollamaEmbedderConfig"
          - $ref: "#/definitions/embedders/openaiEmbedderConfig"
          - $ref: "#/definitions/embedders/huggingfaceEmbedderConfig"
          - $ref: "#/definitions/embedders/sentenceTransformerConfig"
  embedders:
    ollamaEmbedderConfig:
      type: object
      title: Ollama Embedder Configuration
      additionalProperties: false
      properties:
        model:
          type: string
          default: nomic-embed-text
          enum:
            - nomic-embed-text
            - mxbai-embed-large
          description: Ollama model name
        base_url:
          type: string
          format: uri
          default: http://localhost:11434
          description: Ollama API endpoint
        dimension:
          type: integer
          default: 768
          minimum: 128
          maximum: 4096
          description: Embedding dimension
        batch_size:
          type: integer
          default: 16
          minimum: 1
          maximum: 128
          description: Batch processing size
        timeout:
          type: integer
          default: 60
          minimum: 10
          description: Request timeout (seconds)
        auto_pull:
          type: boolean
          default: true
          description: Auto-pull missing models
    openaiEmbedderConfig:
      type: object
      title: OpenAI Embedder Configuration
      required:
        - api_key
      additionalProperties: false
      properties:
        api_key:
          type: string
          description: OpenAI API key
        model:
          type: string
          default: text-embedding-3-small
          enum:
            - text-embedding-3-small
            - text-embedding-3-large
            - text-embedding-ada-002
          description: OpenAI model
        dimension:
          type:
            - integer
            - "null"
          minimum: 256
          maximum: 3072
          description: Override dimension
        batch_size:
          type: integer
          default: 100
          minimum: 1
          maximum: 2048
          description: Batch size
        max_retries:
          type: integer
          default: 3
          minimum: 0
          maximum: 10
          description: Max retry attempts
    huggingfaceEmbedderConfig:
      type: object
      title: HuggingFace Embedder Configuration
      additionalProperties: false
      properties:
        model_name:
          type: string
          default: sentence-transformers/all-MiniLM-L6-v2
          description: HuggingFace model ID
        device:
          type: string
          enum:
            - cpu
            - cuda
            - mps
            - auto
          default: auto
          description: Computation device
        batch_size:
          type: integer
          default: 32
          minimum: 1
          maximum: 256
          description: Batch size
        normalize_embeddings:
          type: boolean
          default: true
          description: L2 normalize embeddings
        show_progress_bar:
          type: boolean
          default: false
          description: Show progress bar
        cache_folder:
          type:
            - string
            - "null"
          default: null
          description: Model cache directory
    sentenceTransformerConfig:
      type: object
      title: Sentence Transformer Configuration
      additionalProperties: false
      properties:
        model_name:
          type: string
          default: all-MiniLM-L6-v2
          description: Model name
        device:
          type: string
          default: cpu
          enum:
            - cpu
            - cuda
            - mps
          description: Computation device
        batch_size:
          type: integer
          default: 32
          minimum: 1
          maximum: 256
          description: Batch size
        normalize_embeddings:
          type: boolean
          default: true
          description: Normalize embeddings
        pooling_strategy:
          type: string
          enum:
            - mean
            - max
            - cls
          default: mean
          description: Token pooling strategy
    OllamaEmbedder:
      description: Generate embeddings using Ollama models
      config_schema:
        model:
          type: string
          default: nomic-embed-text
          enum:
            - nomic-embed-text
            - mxbai-embed-large
          description: Ollama model name
        base_url:
          type: string
          format: uri
          default: http://localhost:11434
          description: Ollama API endpoint
        dimension:
          type: integer
          default: 768
          minimum: 128
          maximum: 4096
          description: Embedding dimension
        batch_size:
          type: integer
          default: 16
          minimum: 1
          maximum: 128
          description: Batch processing size
        timeout:
          type: integer
          default: 60
          minimum: 10
          description: Request timeout (seconds)
        auto_pull:
          type: boolean
          default: true
          description: Auto-pull missing models
      required: []
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard Ollama embeddings
          config:
            model: nomic-embed-text
            base_url: http://localhost:11434
            dimension: 768
            batch_size: 16
            timeout: 60
            auto_pull: true
          recommended_for:
            - Local deployment
            - Privacy-focused
            - Development
    HuggingFaceEmbedder:
      description: HuggingFace model embeddings
      config_schema:
        model_name:
          type: string
          default: sentence-transformers/all-MiniLM-L6-v2
          description: Model name
        device:
          type: string
          default: cpu
          enum:
            - cpu
            - cuda
            - mps
          description: Computation device
        batch_size:
          type: integer
          default: 32
          minimum: 1
          maximum: 256
          description: Batch size
      required: []
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard configuration
          config:
            model_name: sentence-transformers/all-MiniLM-L6-v2
            device: cpu
            batch_size: 32
          recommended_for:
            - General use
            - CPU inference
    OpenAIEmbedder:
      description: Generate embeddings using OpenAI API
      config_schema:
        api_key:
          type: string
          description: OpenAI API key
        model:
          type: string
          default: text-embedding-3-small
          enum:
            - text-embedding-3-small
            - text-embedding-3-large
            - text-embedding-ada-002
          description: OpenAI model
        dimension:
          type:
            - integer
            - "null"
          minimum: 256
          maximum: 3072
          description: Override dimension
        batch_size:
          type: integer
          default: 100
          minimum: 1
          maximum: 2048
          description: Batch size
        max_retries:
          type: integer
          default: 3
          minimum: 0
          maximum: 10
          description: Max retry attempts
      required:
        - api_key
      defaults:
        small_model:
          name: Small Model
          description: Fast and cost-effective
          config:
            api_key: ${OPENAI_API_KEY}
            model: text-embedding-3-small
            dimension: null
            batch_size: 100
            max_retries: 3
          recommended_for:
            - Production
            - High throughput
            - Cost optimization
        large_model:
          name: Large Model
          description: Higher quality embeddings
          config:
            api_key: ${OPENAI_API_KEY}
            model: text-embedding-3-large
            dimension: null
            batch_size: 50
            max_retries: 3
          recommended_for:
            - High accuracy
            - Research
            - Quality focus
    SentencetransformerEmbedder:
      description: Sentence transformer embeddings
      config_schema:
        model_name:
          type: string
          default: sentence-transformers/all-MiniLM-L6-v2
          description: Model name
        device:
          type: string
          default: cpu
          enum:
            - cpu
            - cuda
            - mps
          description: Computation device
        batch_size:
          type: integer
          default: 32
          minimum: 1
          maximum: 256
          description: Batch size
      required: []
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard configuration
          config:
            model_name: sentence-transformers/all-MiniLM-L6-v2
            device: cpu
            batch_size: 32
          recommended_for:
            - General use
            - CPU inference
  vectorStoreConfig:
    title: Vector Store Configuration
    required: [type, config]
    properties:
      type:
        type: string
        enum:
          - ChromaStore
          - FAISSStore
          - PineconeStore
          - QdrantStore
      config:
        oneOf:
          - $ref: "#/definitions/vectorStores/chromaStoreConfig"
          - $ref: "#/definitions/vectorStores/faissStoreConfig"
          - $ref: "#/definitions/vectorStores/pineconeStoreConfig"
          - $ref: "#/definitions/vectorStores/qdrantStoreConfig"
  vectorStores:
    chromaStoreConfig:
      type: object
      title: Chroma Store Configuration
      additionalProperties: false
      properties:
        collection_name:
          type: string
          default: documents
          pattern: ^[a-zA-Z0-9_-]+$
          description: Collection name
        persist_directory:
          type: string
          default: ./data/chroma_db
          description: Persistence directory
        host:
          type:
            - string
            - "null"
          default: null
          description: Server host
        port:
          type: integer
          default: 8000
          minimum: 1
          maximum: 65535
          description: Server port
        distance_function:
          type: string
          enum:
            - cosine
            - l2
            - ip
          default: cosine
          description: Distance metric
        embedding_function:
          type:
            - string
            - "null"
          default: null
          description: Built-in embedding function
    faissStoreConfig:
      type: object
      title: FAISS Store Configuration
      required:
        - dimension
      additionalProperties: false
      properties:
        dimension:
          type: integer
          minimum: 1
          maximum: 4096
          description: Vector dimension
        index_type:
          type: string
          enum:
            - Flat
            - IVF
            - HNSW
            - LSH
          default: Flat
          description: Index type
        metric:
          type: string
          enum:
            - L2
            - IP
            - Cosine
          default: L2
          description: Distance metric
        nlist:
          type: integer
          default: 100
          minimum: 1
          description: Number of clusters (IVF)
        nprobe:
          type: integer
          default: 10
          minimum: 1
          description: Clusters to search (IVF)
        use_gpu:
          type: boolean
          default: false
          description: Enable GPU acceleration
    pineconeStoreConfig:
      type: object
      title: Pinecone Store Configuration
      required:
        - api_key
        - index_name
        - dimension
      additionalProperties: false
      properties:
        api_key:
          type: string
          description: Pinecone API key
        environment:
          type: string
          default: us-east-1-aws
          description: Pinecone environment
        index_name:
          type: string
          pattern: ^[a-z0-9-]+$
          description: Index name
        dimension:
          type: integer
          minimum: 1
          maximum: 20000
          description: Vector dimension
        metric:
          type: string
          enum:
            - euclidean
            - cosine
            - dotproduct
          default: cosine
          description: Distance metric
        namespace:
          type: string
          default: ""
          description: Namespace for isolation
        replicas:
          type: integer
          default: 1
          minimum: 1
          maximum: 20
          description: Number of replicas
    qdrantStoreConfig:
      type: object
      title: Qdrant Store Configuration
      required:
        - vector_size
      additionalProperties: false
      properties:
        host:
          type: string
          default: localhost
          description: Server host
        port:
          type: integer
          default: 6333
          minimum: 1
          maximum: 65535
          description: Server port
        grpc_port:
          type: integer
          default: 6334
          minimum: 1
          maximum: 65535
          description: gRPC port
        api_key:
          type:
            - string
            - "null"
          default: null
          description: API key
        collection_name:
          type: string
          default: documents
          pattern: ^[a-zA-Z0-9_-]+$
          description: Collection name
        vector_size:
          type: integer
          minimum: 1
          maximum: 65536
          description: Vector dimension
        distance:
          type: string
          enum:
            - Cosine
            - Euclid
            - Dot
          default: Cosine
          description: Distance metric
        on_disk:
          type: boolean
          default: false
          description: Store vectors on disk
  retrievalStrategyConfig:
    title: Retrieval Strategy Configuration
    oneOf:
      - type: object
        title: RetrivalStrategyConfigBasicSimilarity
        required: [type, config]
        properties:
          type:
            type: string
            const: BasicSimilarityStrategy
            description: Retrieval strategy type identifier
          config:
            $ref: "#/definitions/retrievalStrategies/basicSimilarityConfig"
      - required: [type, config]
        properties:
          type:
            type: string
            const: MetadataFilteredStrategy
            description: Retrieval strategy type identifier
          config:
            $ref: "#/definitions/retrievalStrategies/metadataFilteredConfig"
      - required: [type, config]
        properties:
          type:
            type: string
            const: MultiQueryStrategy
            description: Retrieval strategy type identifier
          config:
            $ref: "#/definitions/retrievalStrategies/multiQueryConfig"
      - required: [type, config]
        properties:
          type:
            type: string
            const: RerankedStrategy
            description: Retrieval strategy type identifier
          config:
            $ref: "#/definitions/retrievalStrategies/rerankedConfig"
      - required: [type, config]
        properties:
          type:
            type: string
            const: HybridUniversalStrategy
            description: Retrieval strategy type identifier
          config:
            $ref: "#/definitions/retrievalStrategies/hybridUniversalConfig"
  retrievalStrategies:
    basicSimilarityConfig:
      type: object
      title: Basic Similarity Configuration
      additionalProperties: false
      properties:
        top_k:
          type: integer
          default: 10
          minimum: 1
          maximum: 1000
          description: Number of results
        distance_metric:
          type: string
          default: cosine
          enum:
            - cosine
            - euclidean
            - manhattan
            - dot
          description: Distance metric
        score_threshold:
          type:
            - number
            - "null"
          default: null
          minimum: 0.0
          maximum: 1.0
          description: Minimum similarity score
    metadataFilteredConfig:
      type: object
      title: Metadata Filtered Configuration
      additionalProperties: false
      properties:
        top_k:
          type: integer
          default: 10
          minimum: 1
          maximum: 1000
          description: Number of results
        filters:
          type: object
          default: {}
          description: Metadata filters
          additionalProperties:
            oneOf:
              - type: string
              - type: number
              - type: boolean
              - type: array
                items:
                  oneOf:
                    - type: string
                    - type: number
                    - type: boolean
        filter_mode:
          type: string
          enum:
            - pre
            - post
          default: pre
          description: When to apply filters
        fallback_multiplier:
          type: integer
          default: 3
          minimum: 1
          maximum: 10
          description: Multiplier for post-filtering
    multiQueryConfig:
      type: object
      title: Multi Query Configuration
      additionalProperties: false
      properties:
        num_queries:
          type: integer
          default: 3
          minimum: 1
          maximum: 10
          description: Number of query variations
        top_k:
          type: integer
          default: 10
          minimum: 1
          maximum: 1000
          description: Results per query
        aggregation_method:
          type: string
          default: weighted
          enum:
            - max
            - mean
            - weighted
            - reciprocal_rank
          description: Result aggregation method
        query_weights:
          type:
            - array
            - "null"
          items:
            type: number
            minimum: 0.0
            maximum: 1.0
          default: null
          description: Weights for each query
    rerankedConfig:
      type: object
      title: Reranked Configuration
      additionalProperties: false
      properties:
        initial_k:
          type: integer
          default: 30
          minimum: 10
          maximum: 1000
          description: Initial candidates
        final_k:
          type: integer
          default: 10
          minimum: 1
          maximum: 100
          description: Final results
        rerank_factors:
          type: object
          additionalProperties: false
          properties:
            similarity_weight:
              type: number
              default: 0.7
              minimum: 0.0
              maximum: 1.0
            recency_weight:
              type: number
              default: 0.1
              minimum: 0.0
              maximum: 1.0
            length_weight:
              type: number
              default: 0.1
              minimum: 0.0
              maximum: 1.0
            metadata_weight:
              type: number
              default: 0.1
              minimum: 0.0
              maximum: 1.0
          description: Reranking factor weights
        normalize_scores:
          type: boolean
          default: true
          description: Normalize scores before combining
    hybridUniversalConfig:
      type: object
      title: Hybrid Universal Configuration
      additionalProperties: false
      properties:
        strategies:
          type: array
          minItems: 2
          maxItems: 5
          items:
            type: object
            required:
              - type
            additionalProperties: false
            properties:
              type:
                type: string
                enum:
                  - BasicSimilarityStrategy
                  - MetadataFilteredStrategy
                  - MultiQueryStrategy
                  - RerankedStrategy
              weight:
                type: number
                default: 1.0
                minimum: 0.0
                maximum: 1.0
              config:
                type: object
          description: Sub-strategies to combine
        combination_method:
          type: string
          default: weighted_average
          enum:
            - weighted_average
            - rank_fusion
            - score_fusion
          description: Combination method
        final_k:
          type: integer
          default: 10
          minimum: 1
          maximum: 1000
          description: Final number of results
  stores:
    QdrantStore:
      description: Qdrant vector database
      config_schema:
        host:
          type: string
          default: localhost
          description: Server host
        port:
          type: integer
          default: 6333
          minimum: 1
          maximum: 65535
          description: Server port
        collection_name:
          type: string
          default: documents
          pattern: ^[a-zA-Z0-9_-]+$
          description: Collection name
        vector_size:
          type: integer
          minimum: 1
          maximum: 65536
          description: Vector dimension
        distance:
          type: string
          enum:
            - Cosine
            - Euclid
            - Dot
          default: Cosine
          description: Distance metric
      required:
        - vector_size
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard qdrant store configuration
          config:
            host:
              type: string
              default: localhost
              description: Server host
            port:
              type: integer
              default: 6333
              minimum: 1
              maximum: 65535
              description: Server port
            collection_name:
              type: string
              default: documents
              pattern: ^[a-zA-Z0-9_-]+$
              description: Collection name
            vector_size: 768
            distance:
              type: string
              enum:
                - Cosine
                - Euclid
                - Dot
              default: Cosine
              description: Distance metric
          recommended_for:
            - Production
            - Scalable
            - Cloud
    ChromaStore:
      description: ChromaDB vector database configuration
      config_schema:
        collection_name:
          type: string
          default: documents
          pattern: ^[a-zA-Z0-9_-]+$
          description: Collection name
        persist_directory:
          type: string
          default: ./data/chroma_db
          description: Persistence directory
        host:
          type:
            - string
            - "null"
          default: null
          description: Server host
        port:
          type: integer
          default: 8000
          minimum: 1
          maximum: 65535
          description: Server port
        distance_function:
          type: string
          enum:
            - cosine
            - l2
            - ip
          default: cosine
          description: Distance metric
        embedding_function:
          type:
            - string
            - "null"
          default: null
          description: Built-in embedding function
      required: []
      defaults:
        local_persistent:
          name: Local Persistent
          description: Local persistent storage
          config:
            collection_name: documents
            persist_directory: ./data/chroma_db
            host: null
            port: 8000
            distance_function: cosine
            embedding_function: null
          recommended_for:
            - Development
            - Small scale
            - Local deployment
        client_server:
          name: Client-Server
          description: Connect to Chroma server
          config:
            collection_name: documents
            persist_directory: null
            host: localhost
            port: 8000
            distance_function: cosine
            embedding_function: null
          recommended_for:
            - Production
            - Distributed
            - Scalable
    FAISSStore:
      description: FAISS vector index configuration
      config_schema:
        dimension:
          type: integer
          minimum: 1
          maximum: 4096
          description: Vector dimension
        index_type:
          type: string
          enum:
            - Flat
            - IVF
            - HNSW
            - LSH
          default: Flat
          description: Index type
        metric:
          type: string
          enum:
            - L2
            - IP
            - Cosine
          default: L2
          description: Distance metric
        nlist:
          type: integer
          default: 100
          minimum: 1
          description: Number of clusters (IVF)
        nprobe:
          type: integer
          default: 10
          minimum: 1
          description: Clusters to search (IVF)
        use_gpu:
          type: boolean
          default: false
          description: Enable GPU acceleration
      required:
        - dimension
      defaults:
        flat_index:
          name: Flat Index
          description: Exact search, best for small datasets
          config:
            dimension: 768
            index_type: Flat
            metric: L2
            nlist: 100
            nprobe: 10
            use_gpu: false
          recommended_for:
            - Small datasets
            - Exact search
            - High accuracy
        ivf_index:
          name: IVF Index
          description: Approximate search for larger datasets
          config:
            dimension: 768
            index_type: IVF
            metric: Cosine
            nlist: 1000
            nprobe: 50
            use_gpu: false
          recommended_for:
            - Large datasets
            - Fast search
            - Trade-off accuracy
    PineconeStore:
      description: Pinecone vector database
      config_schema:
        api_key:
          type: string
          description: Pinecone API key
        environment:
          type: string
          default: us-east-1-aws
          description: Pinecone environment
        index_name:
          type: string
          pattern: ^[a-z0-9-]+$
          description: Index name
        dimension:
          type: integer
          minimum: 1
          maximum: 20000
          description: Vector dimension
        metric:
          type: string
          enum:
            - euclidean
            - cosine
            - dotproduct
          default: cosine
          description: Distance metric
      required:
        - api_key
        - index_name
        - dimension
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard pinecone store configuration
          config:
            api_key: ${PINECONE_API_KEY}
            environment:
              type: string
              default: us-east-1-aws
              description: Pinecone environment
            index_name: documents
            dimension: 768
            metric:
              type: string
              enum:
                - euclidean
                - cosine
                - dotproduct
              default: cosine
              description: Distance metric
          recommended_for:
            - Production
            - Scalable
            - Cloud
  retrievers:
    BasicSimilarityStrategy:
      description: Simple vector similarity search
      config_schema:
        top_k:
          type: integer
          default: 10
          minimum: 1
          maximum: 1000
          description: Number of results
        distance_metric:
          type: string
          default: cosine
          enum:
            - cosine
            - euclidean
            - manhattan
            - dot
          description: Distance metric
        score_threshold:
          type:
            - number
            - "null"
          default: null
          minimum: 0.0
          maximum: 1.0
          description: Minimum similarity score
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard similarity search
          config:
            top_k: 10
            distance_metric: cosine
            score_threshold: null
          recommended_for:
            - Simple queries
            - Fast retrieval
            - Baseline
        high_precision:
          name: High Precision
          description: Higher threshold for better precision
          config:
            top_k: 5
            distance_metric: cosine
            score_threshold: 0.7
          recommended_for:
            - Precise matching
            - Quality over quantity
    RerankedStrategy:
      description: Re-rank results
      config_schema:
        top_k:
          type: integer
          default: 10
          minimum: 1
          maximum: 1000
          description: Number of results
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard reranked retrieval
          config:
            top_k: 10
          recommended_for:
            - General use
    MetadataFilteredStrategy:
      description: Filter by metadata
      config_schema:
        top_k:
          type: integer
          default: 10
          minimum: 1
          maximum: 1000
          description: Number of results
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard metadata filtered retrieval
          config:
            top_k: 10
          recommended_for:
            - General use
    HybridUniversalStrategy:
      description: Combine multiple strategies
      config_schema:
        top_k:
          type: integer
          default: 10
          minimum: 1
          maximum: 1000
          description: Number of results
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard hybrid universal retrieval
          config:
            top_k: 10
          recommended_for:
            - General use
    MultiQueryStrategy:
      description: Multiple query variations
      config_schema:
        top_k:
          type: integer
          default: 10
          minimum: 1
          maximum: 1000
          description: Number of results
      defaults:
        general_purpose:
          name: General Purpose
          description: Standard multi query retrieval
          config:
            top_k: 10
          recommended_for:
            - General use
